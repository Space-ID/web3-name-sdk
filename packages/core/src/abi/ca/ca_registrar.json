{
	"address": "DJSovpN5v7g3Hqw89oT7AmaRMp4RTPJ1v1UUxQM86hut",
	"metadata": {
		"name": "ca_registrar",
		"version": "0.1.0",
		"spec": "0.1.0",
		"description": "Solana CA Domain Registrar - Contract Address Name Service"
	},
	"instructions": [
		{
			"name": "buy_domain",
			"discriminator": [
				30,
				149,
				199,
				185,
				229,
				43,
				149,
				21
			],
			"accounts": [
				{
					"name": "buyer",
					"docs": [
						"User paying for domain purchase, who will also become the new domain owner"
					],
					"writable": true,
					"signer": true
				},
				{
					"name": "domain_record",
					"docs": [
						"Domain record account to be purchased"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "arg",
								"path": "domain_name"
							}
						]
					}
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "pyth_price_update",
					"docs": [
						"Pyth price oracle account (SOL/USD price)",
						"Used to calculate accurate SOL amounts"
					]
				},
				{
					"name": "system_program",
					"address": "11111111111111111111111111111111"
				}
			],
			"args": [
				{
					"name": "_domain_name",
					"type": "string"
				},
				{
					"name": "years",
					"type": "u64"
				},
				{
					"name": "addresses",
					"type": {
						"vec": {
							"defined": {
								"name": "ChainAddress"
							}
						}
					}
				},
				{
					"name": "owner",
					"type": "pubkey"
				}
			]
		},
		{
			"name": "initialize",
			"discriminator": [
				175,
				175,
				109,
				31,
				13,
				152,
				155,
				237
			],
			"accounts": [
				{
					"name": "authority",
					"writable": true,
					"signer": true
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account (PDA)"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "system_program",
					"address": "11111111111111111111111111111111"
				}
			],
			"args": [
				{
					"name": "base_price_usd",
					"type": "u64"
				},
				{
					"name": "grace_period_seconds",
					"type": "i64"
				}
			]
		},
		{
			"name": "register_domain",
			"discriminator": [
				236,
				7,
				208,
				151,
				173,
				149,
				73,
				104
			],
			"accounts": [
				{
					"name": "buyer",
					"docs": [
						"User paying for domain registration fees, who will also be the initial owner"
					],
					"writable": true,
					"signer": true
				},
				{
					"name": "domain_record",
					"docs": [
						"Account storing domain information, using the domain name as a seed for PDA derivation"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "arg",
								"path": "domain_name"
							}
						]
					}
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account, storing global configuration and statistics"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "pyth_price_update",
					"docs": [
						"Pyth price oracle account (SOL/USD price)",
						"Used to calculate accurate SOL amounts"
					]
				},
				{
					"name": "system_program",
					"docs": [
						"Solana system program, used for transfer operations"
					],
					"address": "11111111111111111111111111111111"
				}
			],
			"args": [
				{
					"name": "domain_name",
					"type": "string"
				},
				{
					"name": "years",
					"type": "u64"
				},
				{
					"name": "addresses",
					"type": {
						"vec": {
							"defined": {
								"name": "ChainAddress"
							}
						}
					}
				},
				{
					"name": "owner",
					"type": "pubkey"
				}
			]
		},
		{
			"name": "renew_domain",
			"discriminator": [
				198,
				206,
				229,
				140,
				157,
				111,
				79,
				68
			],
			"accounts": [
				{
					"name": "payer",
					"docs": [
						"User paying for domain renewal fees"
					],
					"writable": true,
					"signer": true
				},
				{
					"name": "domain_record",
					"docs": [
						"Domain record account to be renewed"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "arg",
								"path": "domain_name"
							}
						]
					}
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "pyth_price_update",
					"docs": [
						"Pyth price oracle account (SOL/USD price)",
						"Used to calculate accurate SOL amounts"
					]
				},
				{
					"name": "system_program",
					"address": "11111111111111111111111111111111"
				}
			],
			"args": [
				{
					"name": "_domain_name",
					"type": "string"
				},
				{
					"name": "years",
					"type": "u64"
				}
			]
		},
		{
			"name": "transfer_domain",
			"discriminator": [
				129,
				115,
				193,
				43,
				174,
				5,
				241,
				52
			],
			"accounts": [
				{
					"name": "owner",
					"docs": [
						"Current domain owner"
					],
					"signer": true,
					"relations": [
						"domain_record"
					]
				},
				{
					"name": "domain_record",
					"docs": [
						"Domain record to transfer"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "account",
								"path": "domain_record.domain_name",
								"account": "DomainRecord"
							}
						]
					}
				}
			],
			"args": [
				{
					"name": "_domain_name",
					"type": "string"
				},
				{
					"name": "new_owner",
					"type": "pubkey"
				}
			]
		},
		{
			"name": "update_addresses",
			"discriminator": [
				207,
				87,
				39,
				151,
				249,
				225,
				189,
				216
			],
			"accounts": [
				{
					"name": "owner",
					"docs": [
						"Domain owner"
					],
					"signer": true,
					"relations": [
						"domain_record"
					]
				},
				{
					"name": "domain_record",
					"docs": [
						"Domain record to update"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "arg",
								"path": "domain_name"
							}
						]
					}
				}
			],
			"args": [
				{
					"name": "_domain_name",
					"type": "string"
				},
				{
					"name": "addresses",
					"type": {
						"vec": {
							"defined": {
								"name": "ChainAddress"
							}
						}
					}
				}
			]
		},
		{
			"name": "update_authority",
			"discriminator": [
				32,
				46,
				64,
				28,
				149,
				75,
				243,
				88
			],
			"accounts": [
				{
					"name": "authority",
					"docs": [
						"Current program administrator, must match the authority in ProgramState"
					],
					"signer": true,
					"relations": [
						"program_state"
					]
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "new_authority",
					"docs": [
						"New program administrator account"
					]
				}
			],
			"args": []
		},
		{
			"name": "update_expiry_timestamp",
			"docs": [
				"Updates the expiry timestamp of a domain (for testing purposes only)"
			],
			"discriminator": [
				136,
				13,
				104,
				226,
				122,
				57,
				255,
				105
			],
			"accounts": [
				{
					"name": "authority",
					"docs": [
						"Program administrator, must match the authority in ProgramState"
					],
					"signer": true,
					"relations": [
						"program_state"
					]
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "domain_record",
					"docs": [
						"Domain record account to be updated"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									100,
									111,
									109,
									97,
									105,
									110
								]
							},
							{
								"kind": "arg",
								"path": "domain_name"
							}
						]
					}
				}
			],
			"args": [
				{
					"name": "_domain_name",
					"type": "string"
				},
				{
					"name": "new_expiry_timestamp",
					"type": "i64"
				}
			]
		},
		{
			"name": "update_grace_period",
			"discriminator": [
				7,
				76,
				130,
				186,
				86,
				93,
				66,
				134
			],
			"accounts": [
				{
					"name": "authority",
					"docs": [
						"Program administrator, must match the authority in ProgramState"
					],
					"signer": true,
					"relations": [
						"program_state"
					]
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				}
			],
			"args": [
				{
					"name": "grace_period_seconds",
					"type": "i64"
				}
			]
		},
		{
			"name": "update_price",
			"discriminator": [
				61,
				34,
				117,
				155,
				75,
				34,
				123,
				208
			],
			"accounts": [
				{
					"name": "authority",
					"docs": [
						"Program administrator, must match the authority in ProgramState"
					],
					"writable": true,
					"signer": true,
					"relations": [
						"program_state"
					]
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				}
			],
			"args": [
				{
					"name": "new_price",
					"type": "u64"
				}
			]
		},
		{
			"name": "withdraw_fees",
			"discriminator": [
				198,
				212,
				171,
				109,
				144,
				215,
				174,
				89
			],
			"accounts": [
				{
					"name": "signer",
					"docs": [
						"caller - can be anyone"
					],
					"writable": true,
					"signer": true
				},
				{
					"name": "authority",
					"docs": [
						"fee receiver - must be the authority in ProgramState"
					],
					"writable": true
				},
				{
					"name": "program_state",
					"docs": [
						"Program state account"
					],
					"writable": true,
					"pda": {
						"seeds": [
							{
								"kind": "const",
								"value": [
									115,
									116,
									97,
									116,
									101
								]
							}
						]
					}
				},
				{
					"name": "system_program",
					"address": "11111111111111111111111111111111"
				}
			],
			"args": []
		}
	],
	"accounts": [
		{
			"name": "DomainRecord",
			"discriminator": [
				130,
				61,
				36,
				125,
				56,
				48,
				189,
				247
			]
		},
		{
			"name": "PriceUpdateV2",
			"discriminator": [
				34,
				241,
				35,
				99,
				157,
				126,
				244,
				205
			]
		},
		{
			"name": "ProgramState",
			"discriminator": [
				77,
				209,
				137,
				229,
				149,
				67,
				167,
				230
			]
		}
	],
	"events": [
		{
			"name": "BuyDomainEvent",
			"discriminator": [
				73,
				163,
				81,
				67,
				213,
				124,
				16,
				96
			]
		},
		{
			"name": "RegisterDomainEvent",
			"discriminator": [
				160,
				213,
				133,
				79,
				68,
				212,
				26,
				85
			]
		},
		{
			"name": "RenewDomainEvent",
			"discriminator": [
				59,
				138,
				241,
				155,
				76,
				217,
				42,
				236
			]
		},
		{
			"name": "TransferDomainEvent",
			"discriminator": [
				126,
				232,
				115,
				32,
				133,
				96,
				95,
				102
			]
		},
		{
			"name": "UpdateAddressesEvent",
			"discriminator": [
				14,
				161,
				98,
				119,
				175,
				26,
				52,
				90
			]
		}
	],
	"errors": [
		{
			"code": 6000,
			"name": "InvalidDomainLength",
			"msg": "Invalid domain name length"
		},
		{
			"code": 6001,
			"name": "InvalidRegisterYears",
			"msg": "Invalid number of years for registration"
		},
		{
			"code": 6002,
			"name": "NotDomainOwner",
			"msg": "Only the domain owner can perform this action"
		},
		{
			"code": 6003,
			"name": "DomainExpired",
			"msg": "Domain is expired"
		},
		{
			"code": 6004,
			"name": "InsufficientPayment",
			"msg": "Insufficient payment"
		},
		{
			"code": 6005,
			"name": "NotProgramAuthority",
			"msg": "Only the program authority can perform this action"
		},
		{
			"code": 6006,
			"name": "InvalidPriceFeed",
			"msg": "Invalid price feed account"
		},
		{
			"code": 6007,
			"name": "MathOverflow",
			"msg": "Calculation overflow"
		},
		{
			"code": 6008,
			"name": "DomainExpiredBeyondGracePeriod",
			"msg": "Domain is expired beyond grace period, use buy_domain instead"
		},
		{
			"code": 6009,
			"name": "DomainNotAvailableForPurchase",
			"msg": "Domain is not available for purchase, must be expired and beyond grace period"
		},
		{
			"code": 6010,
			"name": "TooManyAddresses",
			"msg": "Too many addresses. Maximum allowed is 20"
		}
	],
	"types": [
		{
			"name": "BuyDomainEvent",
			"docs": [
				"Event emitted when a domain is purchased after expiration"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"type": "string"
					},
					{
						"name": "buyer",
						"type": "pubkey"
					},
					{
						"name": "previous_owner",
						"type": "pubkey"
					},
					{
						"name": "new_owner",
						"type": "pubkey"
					},
					{
						"name": "years",
						"type": "u64"
					},
					{
						"name": "fee",
						"type": "u64"
					},
					{
						"name": "registration_timestamp",
						"type": "i64"
					},
					{
						"name": "expiry_timestamp",
						"type": "i64"
					},
					{
						"name": "addresses_count",
						"type": "u8"
					}
				]
			}
		},
		{
			"name": "ChainAddress",
			"docs": [
				"Represents an address on a specific blockchain"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "chain_id",
						"type": "u8"
					},
					{
						"name": "address",
						"type": "string"
					}
				]
			}
		},
		{
			"name": "DomainRecord",
			"docs": [
				"Represents a domain record in the CA system"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"docs": [
							"Domain name without the .ca suffix (e.g., \"trump\" for \"trump.ca\")"
						],
						"type": "string"
					},
					{
						"name": "owner",
						"docs": [
							"Owner of the domain"
						],
						"type": "pubkey"
					},
					{
						"name": "expiry_timestamp",
						"docs": [
							"Timestamp when domain expires (seconds since Unix epoch)"
						],
						"type": "i64"
					},
					{
						"name": "registration_timestamp",
						"docs": [
							"Timestamp when domain was initially registered"
						],
						"type": "i64"
					},
					{
						"name": "addresses",
						"docs": [
							"Addresses for different blockchains associated with this domain, max 10"
						],
						"type": {
							"vec": {
								"defined": {
									"name": "ChainAddress"
								}
							}
						}
					},
					{
						"name": "bump",
						"docs": [
							"Bump seed for PDA derivation"
						],
						"type": "u8"
					}
				]
			}
		},
		{
			"name": "PriceFeedMessage",
			"repr": {
				"kind": "c"
			},
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "feed_id",
						"docs": [
							"`FeedId` but avoid the type alias because of compatibility issues with Anchor's `idl-build` feature."
						],
						"type": {
							"array": [
								"u8",
								32
							]
						}
					},
					{
						"name": "price",
						"type": "i64"
					},
					{
						"name": "conf",
						"type": "u64"
					},
					{
						"name": "exponent",
						"type": "i32"
					},
					{
						"name": "publish_time",
						"docs": [
							"The timestamp of this price update in seconds"
						],
						"type": "i64"
					},
					{
						"name": "prev_publish_time",
						"docs": [
							"The timestamp of the previous price update. This field is intended to allow users to",
							"identify the single unique price update for any moment in time:",
							"for any time t, the unique update is the one such that prev_publish_time < t <= publish_time.",
							"",
							"Note that there may not be such an update while we are migrating to the new message-sending logic,",
							"as some price updates on pythnet may not be sent to other chains (because the message-sending",
							"logic may not have triggered). We can solve this problem by making the message-sending mandatory",
							"(which we can do once publishers have migrated over).",
							"",
							"Additionally, this field may be equal to publish_time if the message is sent on a slot where",
							"where the aggregation was unsuccesful. This problem will go away once all publishers have",
							"migrated over to a recent version of pyth-agent."
						],
						"type": "i64"
					},
					{
						"name": "ema_price",
						"type": "i64"
					},
					{
						"name": "ema_conf",
						"type": "u64"
					}
				]
			}
		},
		{
			"name": "PriceUpdateV2",
			"docs": [
				"A price update account. This account is used by the Pyth Receiver program to store a verified price update from a Pyth price feed.",
				"It contains:",
				"- `write_authority`: The write authority for this account. This authority can close this account to reclaim rent or update the account to contain a different price update.",
				"- `verification_level`: The [`VerificationLevel`] of this price update. This represents how many Wormhole guardian signatures have been verified for this price update.",
				"- `price_message`: The actual price update.",
				"- `posted_slot`: The slot at which this price update was posted."
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "write_authority",
						"type": "pubkey"
					},
					{
						"name": "verification_level",
						"type": {
							"defined": {
								"name": "VerificationLevel"
							}
						}
					},
					{
						"name": "price_message",
						"type": {
							"defined": {
								"name": "PriceFeedMessage"
							}
						}
					},
					{
						"name": "posted_slot",
						"type": "u64"
					}
				]
			}
		},
		{
			"name": "ProgramState",
			"docs": [
				"Global program state - singleton PDA"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "authority",
						"docs": [
							"Admin authority who can update settings and withdraw fees"
						],
						"type": "pubkey"
					},
					{
						"name": "base_price_usd",
						"docs": [
							"Base price in USD cents (e.g. 500 = $5.00)"
						],
						"type": "u64"
					},
					{
						"name": "domains_registered",
						"docs": [
							"Total number of domains registered"
						],
						"type": "u64"
					},
					{
						"name": "grace_period_seconds",
						"docs": [
							"Grace period duration in seconds",
							"Determines how long a domain can be renewed after expiration"
						],
						"type": "i64"
					},
					{
						"name": "bump",
						"docs": [
							"Bump seed for PDA derivation"
						],
						"type": "u8"
					}
				]
			}
		},
		{
			"name": "RegisterDomainEvent",
			"docs": [
				"Event emitted when a domain is registered"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"type": "string"
					},
					{
						"name": "buyer",
						"type": "pubkey"
					},
					{
						"name": "owner",
						"type": "pubkey"
					},
					{
						"name": "years",
						"type": "u64"
					},
					{
						"name": "fee",
						"type": "u64"
					},
					{
						"name": "registration_timestamp",
						"type": "i64"
					},
					{
						"name": "expiry_timestamp",
						"type": "i64"
					},
					{
						"name": "addresses_count",
						"type": "u8"
					}
				]
			}
		},
		{
			"name": "RenewDomainEvent",
			"docs": [
				"Event emitted when a domain is renewed"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"type": "string"
					},
					{
						"name": "payer",
						"type": "pubkey"
					},
					{
						"name": "owner",
						"type": "pubkey"
					},
					{
						"name": "years",
						"type": "u64"
					},
					{
						"name": "fee",
						"type": "u64"
					},
					{
						"name": "old_expiry",
						"type": "i64"
					},
					{
						"name": "new_expiry",
						"type": "i64"
					}
				]
			}
		},
		{
			"name": "TransferDomainEvent",
			"docs": [
				"Event emitted when a domain is transferred to a new owner"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"type": "string"
					},
					{
						"name": "previous_owner",
						"type": "pubkey"
					},
					{
						"name": "new_owner",
						"type": "pubkey"
					}
				]
			}
		},
		{
			"name": "UpdateAddressesEvent",
			"docs": [
				"Event emitted when domain addresses are updated"
			],
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "domain_name",
						"type": "string"
					},
					{
						"name": "owner",
						"type": "pubkey"
					},
					{
						"name": "old_addresses_count",
						"type": "u8"
					},
					{
						"name": "new_addresses_count",
						"type": "u8"
					}
				]
			}
		},
		{
			"name": "VerificationLevel",
			"docs": [
				"Pyth price updates are bridged to all blockchains via Wormhole.",
				"Using the price updates on another chain requires verifying the signatures of the Wormhole guardians.",
				"The usual process is to check the signatures for two thirds of the total number of guardians, but this can be cumbersome on Solana because of the transaction size limits,",
				"so we also allow for partial verification.",
				"",
				"This enum represents how much a price update has been verified:",
				"- If `Full`, we have verified the signatures for two thirds of the current guardians.",
				"- If `Partial`, only `num_signatures` guardian signatures have been checked.",
				"",
				"# Warning",
				"Using partially verified price updates is dangerous, as it lowers the threshold of guardians that need to collude to produce a malicious price update."
			],
			"type": {
				"kind": "enum",
				"variants": [
					{
						"name": "Partial",
						"fields": [
							{
								"name": "num_signatures",
								"type": "u8"
							}
						]
					},
					{
						"name": "Full"
					}
				]
			}
		}
	]
}